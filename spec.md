# 順番待ちシステム - 実装仕様書

## 1. 受付・発券機能

### 1-1. 新規受付登録

- 受付番号の自動採番（001, 002...）
- 入力項目:
  - 人数（大人・子供の区別）
  - 座席タイプ（テーブル/カウンター）
  - 禁煙/喫煙の選択
- QR コード生成（顧客用待ち状況確認 URL）
- 受付時刻の自動記録

### 1-2. デジタル整理券

- 受付番号、QR コード、待ち組数、推定待ち時間を含む画面表示
- スクリーンショット保存またはブックマーク可能

---

## 2. 順番管理機能

### 2-1. 待ち状況一覧

- 全受付の一覧表示
- 表示項目:
  - 受付番号
  - 受付時刻
  - 人数（大人/子供）
  - 座席タイプ
  - 禁煙/喫煙
  - ステータス（待機中/呼び出し中/案内完了/キャンセル）
  - 待ち時間（経過時間）

### 2-2. ソート

- 受付時刻順ソート（昇順/降順）

---

## 3. 呼び出し機能

### 3-1. 手動呼び出し

- 呼び出しボタンで次の番号を呼び出し
- 現在の呼び出し番号を大きく表示

### 3-2. ステータス変更

- 待機中 → 呼び出し中 → 案内完了
- キャンセル処理
- ステータス変更履歴の記録

---

## 4. 顧客向け待ち状況確認画面

### 4-1. 待ち状況表示

- 現在の呼び出し番号（大きく表示）
- 自分の受付番号
- あと何組待ちか
- 推定待ち時間

### 4-2. リアルタイム更新

- 店舗側の操作が即座に反映
- 自動更新（WebSocket またはポーリング）

### 4-3. UI 要件

- スマートフォン最適化（レスポンシブ）
- シンプルで見やすいデザイン
- 高齢者でも使いやすい大きな文字

---

## 5. 店舗側管理画面

### 5-1. ダッシュボード

- 現在の待ち状況サマリー
- 呼び出し中の番号
- 待ち組数
- クイックアクション（呼び出し、完了、キャンセル）

### 5-2. 受付画面

- 新規受付の登録フォーム
- QR コード即座表示
- 連続受付モード

### 5-3. 一覧管理画面

- 受付時刻順ソート機能
- 各受付の詳細確認・編集
- ステータス変更（呼び出し、完了、キャンセル）

---

## 6. 差別化機能（こだわりポイント）

### 6-1. リアルタイム更新

- WebSocket による双方向通信
- 店舗側の操作が顧客画面に即座反映

### 6-2. PWA 対応

- オフラインでも基本機能を使用可能
- ホーム画面への追加
- Web Push 通知（順番が近づいたら通知）

---

## 7. 画面構成

### 店舗側

1. ダッシュボード（ホーム）
2. 新規受付画面
3. 待ち状況一覧画面

### 顧客側

1. 待ち状況確認画面（QR コードからアクセス）

---

## 8. データ設計（概要）

### 受付テーブル

- ID
- 受付番号
- 受付日時
- 大人人数
- 子供人数
- 座席タイプ
- 禁煙/喫煙
- ステータス
- 呼び出し日時
- 案内完了日時
- キャンセル日時
- 待ち時間（計算値）

### 店舗設定テーブル

- 店舗名
- 1 組あたりの平均案内時間（推定待ち時間計算用）
- 営業開始時刻
- 営業終了時刻

---

## 9. 非機能要件

### 9-1. パフォーマンス

- ページ読み込み 3 秒以内
- リアルタイム更新の遅延 1 秒以内

### 9-2. セキュリティ

- 顧客画面は受付番号のみで認証
- 店舗画面は簡易認証（パスワード）
- HTTPS 必須

### 9-3. 可用性

- レスポンシブデザイン（スマホ/タブレット/PC）
- モダンブラウザ対応（Chrome, Safari, Edge 最新版）

---

## 10. 実装しない機能（明確な除外）

- 紙の整理券印刷
- SMS/電話/LINE 通知
- 外部システム連携（POS、予約など）
- オンライン事前受付
- 複数店舗管理
- 会員登録システム
- 決済機能
- スタッフ管理・権限設定
- 多言語対応
- ダークモード
- データ可視化・分析機能
- アクセシビリティ対応
